<%- include("partials/top") %>
<section class="card fade-in">
  <div class="section-head">
    <h1><%= pageTitle %></h1>
    <p class="subtle">
      <% if (section === 'rangliste') { %>
        Bestenlisten und Rekorde des Vereins.
      <% } else { %>
        Lustige und kuriose Begebenheiten aus dem Vereinsleben.
      <% } %>
    </p>
  </div>

  <% if (entries.length > 0) { %>
    <div class="records-table-wrap">
      <table class="records-table">
        <thead>
          <tr>
            <th>Rekord</th>
            <th>Rekordhalter</th>
            <% if (isAdmin) { %><th class="actions"></th><% } %>
          </tr>
        </thead>
        <tbody>
          <% entries.forEach((entry) => { %>
            <tr data-record-id="<%= entry.id %>">
              <td class="record-title"><%= entry.title %></td>
              <td class="record-holder"><%= entry.holder %></td>
              <% if (isAdmin) { %>
                <td class="actions">
                  <div class="action-btns">
                    <button type="button" class="btn-edit btn-sm" title="Bearbeiten">âœ</button>
                    <form method="post" action="/records/delete" data-confirm="Eintrag wirklich lÃ¶schen?">
                      <input type="hidden" name="csrfToken" value="<%= csrfToken %>" />
                      <input type="hidden" name="recordId" value="<%= entry.id %>" />
                      <input type="hidden" name="section" value="<%= section %>" />
                      <button type="submit" class="btn-danger btn-sm">Ã—</button>
                    </form>
                  </div>
                  <form method="post" action="/records/edit" class="edit-form" style="display:none">
                    <input type="hidden" name="csrfToken" value="<%= csrfToken %>" />
                    <input type="hidden" name="recordId" value="<%= entry.id %>" />
                    <input type="hidden" name="section" value="<%= section %>" />
                    <input type="hidden" name="record" class="edit-title-val" />
                    <input type="hidden" name="holder" class="edit-holder-val" />
                  </form>
                </td>
              <% } %>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  <% } else { %>
    <div class="empty-state">
      <div class="empty-state-icon">ğŸ“Š</div>
      <p>Noch keine EintrÃ¤ge vorhanden.</p>
    </div>
  <% } %>

  <% if (isAdmin) { %>
    <h2>Neuer Eintrag</h2>
    <form method="post" action="/records/add" class="inline-form">
      <input type="hidden" name="csrfToken" value="<%= csrfToken %>" />
      <input type="hidden" name="section" value="<%= section %>" />
      <label>Rekord / Titel
        <input name="record" placeholder="z. B. HÃ¶chste Punktzahl" required maxlength="120" />
      </label>
      <label>Rekordhalter
        <input name="holder" placeholder="z. B. Max Mustermann" required maxlength="120" />
      </label>
      <button type="submit">Eintrag speichern</button>
    </form>
  <% } %>
</section>
<%- include("partials/bottom") %>
